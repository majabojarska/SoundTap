var soundMap = {
  // Sounds are mapped to ASCII characters (not keys)

  //////////////////////////////////////////////////////////////////
  // Small-case letters
  q: {
    sound: new Howl({
      src: ["../audio/Guitar/chord1.mp3"]
    })
  },
  w: {
    sound: new Howl({
      src: ["../audio/Guitar/chord3.mp3"]
    })
  },
  e: {
    sound: new Howl({
      src: ["../audio/Guitar/chord4.mp3"]
    })
  },
  r: {
    sound: new Howl({
      src: ["../audio/Guitar/chord5.mp3"]
    })
  },
  t: {
    sound: new Howl({
      src: ["../audio/Guitar/chord6.mp3"]
    })
  },
  y: {
    sound: new Howl({
      src: ["../audio/Leszek/fenk.mp3"]
    })
  },
  u: {
    sound: new Howl({
      src: ["../audio/Leszek/lup1.mp3"]
    })
  },
  i: {
    sound: new Howl({
      src: ["../audio/Leszek/picobello.mp3"]
    })
  },
  o: {
    sound: new Howl({
      src: ["../audio/Leszek/FesteB.mp3"]
    })
  },
  p: {
    sound: new Howl({
      src: ["../audio/Leszek/pk1.mp3"]
    })
  },
  a: {
    sound: new Howl({
      src: ["../audio/Guitar/penta1.mp3"]
    })
  },
  s: {
    sound: new Howl({
      src: ["../audio/Guitar/penta2.mp3"]
    })
  },
  d: {
    sound: new Howl({
      src: ["../audio/Guitar/penta3.mp3"]
    })
  },
  f: {
    sound: new Howl({
      src: ["../audio/Guitar/penta4.mp3"]
    })
  },
  g: {
    sound: new Howl({
      src: ["../audio/Guitar/penta5.mp3"]
    })
  },
  h: {
    sound: new Howl({
      src: ["../audio/Guitar/penta6.mp3"]
    })
  },
  j: {
    sound: new Howl({
      src: ["../audio/Guitar/penta7.mp3"]
    })
  },
  k: {
    sound: new Howl({
      src: ["../audio/Guitar/penta8.mp3"]
    })
  },
  l: {
    sound: new Howl({
      src: ["../audio/Guitar/penta9.mp3"]
    })
  },
  z: {
    sound: new Howl({
      src: ["../audio/Guitar/perc1.mp3"]
    })
  },
  x: {
    sound: new Howl({
      src: ["../audio/Guitar/perc3.mp3"]
    })
  },
  c: {
    sound: new Howl({
      src: ["../audio/Guitar/perc2.mp3"]
    })
  },
  v: {
    sound: new Howl({
      src: ["../audio/Guitar/mute1.mp3"]
    })
  },
  b: {
    sound: new Howl({
      src: ["../audio/Guitar/bend1.mp3"]
    })
  },
  n: {
    sound: new Howl({
      src: ["../audio/Guitar/chord2.mp3"]
    })
  },
  m: {
    sound: new Howl({
      src: ["../audio/Guitar/misc3.mp3"]
    })
  },

  //////////////////////////////////////////////////////////////////
  // Capital letters
  Q: {
    sound: new Howl({
      src: [""]
    })
  },
  W: {
    sound: new Howl({
      src: [""]
    })
  },
  E: {
    sound: new Howl({
      src: [""]
    })
  },
  R: {
    sound: new Howl({
      src: [""]
    })
  },
  T: {
    sound: new Howl({
      src: [""]
    })
  },
  Y: {
    sound: new Howl({
      src: [""]
    })
  },
  U: {
    sound: new Howl({
      src: [""]
    })
  },
  I: {
    sound: new Howl({
      src: [""]
    })
  },
  O: {
    sound: new Howl({
      src: [""]
    })
  },
  P: {
    sound: new Howl({
      src: ["../audio/Leszek/pk1_echo.mp3"]
    })
  },
  A: {
    sound: new Howl({
      src: [""]
    })
  },
  S: {
    sound: new Howl({
      src: [""]
    })
  },
  D: {
    sound: new Howl({
      src: [""]
    })
  },
  F: {
    sound: new Howl({
      src: [""]
    })
  },
  G: {
    sound: new Howl({
      src: [""]
    })
  },
  H: {
    sound: new Howl({
      src: [""]
    })
  },
  J: {
    sound: new Howl({
      src: [""]
    })
  },
  K: {
    sound: new Howl({
      src: [""]
    })
  },
  L: {
    sound: new Howl({
      src: [""]
    })
  },
  Z: {
    sound: new Howl({
      src: [""]
    })
  },
  X: {
    sound: new Howl({
      src: ["../audio/Guitar/perc4.mp3"]
    })
  },
  C: {
    sound: new Howl({
      src: [""]
    })
  },
  V: {
    sound: new Howl({
      src: [""]
    })
  },
  B: {
    sound: new Howl({
      src: [""]
    })
  },
  N: {
    sound: new Howl({
      src: [""]
    })
  },
  M: {
    sound: new Howl({
      src: [""]
    })
  },

  //////////////////////////////////////////////////////////////////
  // Numbers
  "1": {
    sound: new Howl({
      src: ["../audio/Guitar/bass2.mp3"]
    })
  },
  "2": {
    sound: new Howl({
      src: ["../audio/Guitar/bass3.mp3"]
    })
  },
  "3": {
    sound: new Howl({
      src: ["../audio/Guitar/bass4.mp3"]
    })
  },
  "4": {
    sound: new Howl({
      src: ["../audio/Guitar/bass5.mp3"]
    })
  },
  "5": {
    sound: new Howl({
      src: ["../audio/Guitar/bass6.mp3"]
    })
  },
  "6": {
    sound: new Howl({
      src: ["../audio/Guitar/bass7.mp3"]
    })
  },
  "7": {
    sound: new Howl({
      src: ["../audio/Guitar/bass8.mp3"]
    })
  },
  "8": {
    sound: new Howl({
      src: ["../audio/Guitar/bass9.mp3"]
    })
  },
  "9": {
    sound: new Howl({
      src: ["../audio/Guitar/bass10.mp3"]
    })
  },
  "0": {
    sound: new Howl({
      src: ["../audio/Guitar/bass11.mp3"]
    })
  },

  //////////////////////////////////////////////////////////////////
  // Special letters
  ą: {
    sound: new Howl({
      src: [""]
    })
  },
  ę: {
    sound: new Howl({
      src: [""]
    })
  },
  ó: {
    sound: new Howl({
      src: [""]
    })
  },
  ś: {
    sound: new Howl({
      src: [""]
    })
  },
  ł: {
    sound: new Howl({
      src: [""]
    })
  },
  ż: {
    sound: new Howl({
      src: [""]
    })
  },
  ź: {
    sound: new Howl({
      src: [""]
    })
  },
  ć: {
    sound: new Howl({
      src: [""]
    })
  },
  ń: {
    sound: new Howl({
      src: [""]
    })
  },

  //////////////////////////////////////////////////////////////////
  // Symbols
  "!": {
    sound: new Howl({
      src: [""]
    })
  },
  "@": {
    sound: new Howl({
      src: [""]
    })
  },
  "#": {
    sound: new Howl({
      src: [""]
    })
  },
  $: {
    sound: new Howl({
      src: [""]
    })
  },
  "%": {
    sound: new Howl({
      src: [""]
    })
  },
  "^": {
    sound: new Howl({
      src: [""]
    })
  },
  "&": {
    sound: new Howl({
      src: [""]
    })
  },
  "*": {
    sound: new Howl({
      src: [""]
    })
  },
  "(": {
    sound: new Howl({
      src: [""]
    })
  },
  ")": {
    sound: new Howl({
      src: [""]
    })
  },
  "-": {
    sound: new Howl({
      src: ["../audio/Guitar/bass12.mp3"]
    })
  },
  _: {
    sound: new Howl({
      src: [""]
    })
  },
  "+": {
    sound: new Howl({
      src: [""]
    })
  },
  "=": {
    sound: new Howl({
      src: ["../audio/Guitar/bass13.mp3"]
    })
  },
  "[": {
    sound: new Howl({
      src: ["../audio/Guitar/disson1.mp3"]
    })
  },
  "]": {
    sound: new Howl({
      src: ["../audio/Guitar/disson2.mp3"]
    })
  },
  "{": {
    sound: new Howl({
      src: [""]
    })
  },
  "}": {
    sound: new Howl({
      src: [""]
    })
  },
  ":": {
    sound: new Howl({
      src: [""]
    })
  },
  ";": {
    sound: new Howl({
      src: ["../audio/Guitar/penta10.mp3"]
    })
  },
  "'": {
    sound: new Howl({
      src: ["../audio/Guitar/penta11.mp3"]
    })
  },
  '"': {
    sound: new Howl({
      src: [""]
    })
  },
  "\\": {
    sound: new Howl({
      src: ["../audio/Guitar/penta12.mp3"]
    })
  },
  "|": {
    sound: new Howl({
      src: [""]
    })
  },
  ",": {
    sound: new Howl({
      src: ["../audio/Guitar/misc6.mp3"]
    })
  },
  "<": {
    sound: new Howl({
      src: [""]
    })
  },
  ".": {
    sound: new Howl({
      src: ["../audio/Guitar/misc11.mp3"]
    })
  },
  ">": {
    sound: new Howl({
      src: [""]
    })
  },
  "/": {
    sound: new Howl({
      src: ["../audio/Guitar/harmonics1.mp3"]
    })
  },
  "?": {
    sound: new Howl({
      src: [""]
    })
  },
  "#": {
    sound: new Howl({
      src: [""]
    })
  },
  "`": {
    sound: new Howl({
      src: ["../audio/Guitar/bass1.mp3"]
    })
  },

  //////////////////////////////////////////////////////////////////
  // Whitespace
  " ": {
    sound: new Howl({
      src: ["../audio/Guitar/thump1.mp3"]
    })
  }
};

///////////////////////////////////////////////////////////////////////

// Howler.volume(1);

var objects = [];

function onKeyDown(event) {
  //console.log("onKeyDown | code " + event.character);
  if (soundMap[event.character].sound._src[0].length > 0) {

    // Set random stereo panning
    var randomStereoPan = Math.random()*1.5 - 0.75;
    soundMap[event.character].sound.stereo(randomStereoPan);
    
    // Play audio sample
    soundMap[event.character].sound.play();

    // Create start and end points
    var maxPoint = new Point(view.size._width, view.size._height);
    var startPoint = maxPoint * Point.random();
    var endPoint = maxPoint * Point.random();

    // Set radius accordingly to window size
    var maxRadius =
      window.innerWidth > window.innerHeight
        ? window.innerHeight
        : window.innerWidth;
    var radius = Math.random() * maxRadius * 0.5 + 10;
    
    // Create new circle object
    var newCircle = new Path.Circle(startPoint, radius);
    newCircle.endPoint = endPoint;
    newCircle.moveSpeed = Math.random() * 5;
    newCircle.hueChangeSpeed = Math.random() * 2;
    
    // Give newCircle a random color
    newCircle.fillColor = randomRgbColor();
    
    // Add object to objects array
    objects.push(newCircle);
    // console.log(objects);
  }
}

function onFrame(event) {
  for (var i = 0; i < objects.length; i++) {
    // Change hue
    objects[i].fillColor.hue += objects[i].hueChangeSpeed;
    // Scale
    objects[i].scale(0.96);
    // Move towards endPoint
    var nextPoint =
      objects[i]._position +
      (objects[i].endPoint - objects[i]._position) * objects[i].moveSpeed;

    objects[i]._position = nextPoint;
    // Remove object from objects list if area smaller than 1
    if (objects[i].area < 1) {
      objects[i].remove();
      objects.splice(i, 1);
      i--;
    }
  }
}

function randomRgbColor() {
  var r = Math.random() * 255;
  var g = Math.random() * 255;
  var b = Math.random() * 255;
  var colorString = "rgb(" + r + ", " + g + ", " + b + ")";
  return colorString;
}
