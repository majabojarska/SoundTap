var soundMap = {
  // Sounds are mapped to ASCII characters (not keys)

  //////////////////////////////////////////////////////////////////
  // Small-case letters
  q: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/chord1.mp3"]
    })
  },
  w: {
    // color: 'red',
    sound: new Howl({
      src: ["audio/Guitar/chord3.mp3"]
    })
  },
  e: {
    // color: 'cyan',
    sound: new Howl({
      src: ["audio/Guitar/chord4.mp3"]
    })
  },
  r: {
    // color: 'blue',
    sound: new Howl({
      src: ["audio/Guitar/chord5.mp3"]
    })
  },
  t: {
    // color: 'limegreen',
    sound: new Howl({
      src: ["audio/Guitar/chord6.mp3"]
    })
  },
  y: {
    // color: 'steelblue',
    sound: new Howl({
      src: ["audio/Leszek/fenk.mp3"]
    })
  },
  u: {
    // color: 'yellow',
    sound: new Howl({
      src: ["audio/Leszek/lup1.mp3"]
    })
  },
  i: {
    // color: 'pink',
    sound: new Howl({
      src: ["audio/Leszek/picobello.mp3"]
    })
  },
  o: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Leszek/FesteB.mp3"]
    })
  },
  p: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Leszek/pk1.mp3"]
    })
  },
  a: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/penta1.mp3"]
    })
  },
  s: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/penta2.mp3"]
    })
  },
  d: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/penta3.mp3"]
    })
  },
  f: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/penta4.mp3"]
    })
  },
  g: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/penta5.mp3"]
    })
  },
  h: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/penta6.mp3"]
    })
  },
  j: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/penta7.mp3"]
    })
  },
  k: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/penta8.mp3"]
    })
  },
  l: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/penta9.mp3"]
    })
  },
  z: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/perc1.mp3"]
    })
  },
  x: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/perc3.mp3"]
    })
  },
  c: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/perc2.mp3"]
    })
  },
  v: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/mute1.mp3"]
    })
  },
  b: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/bend1.mp3"]
    })
  },
  n: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/chord2.mp3"]
    })
  },
  m: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/misc3.mp3"]
    })
  },

  //////////////////////////////////////////////////////////////////
  // Capital letters
  Q: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  W: {
    // color: 'red',
    sound: new Howl({
      src: [""]
    })
  },
  E: {
    // color: 'cyan',
    sound: new Howl({
      src: [""]
    })
  },
  R: {
    // color: 'blue',
    sound: new Howl({
      src: [""]
    })
  },
  T: {
    // color: 'limegreen',
    sound: new Howl({
      src: [""]
    })
  },
  Y: {
    // color: 'steelblue',
    sound: new Howl({
      src: [""]
    })
  },
  U: {
    // color: 'yellow',
    sound: new Howl({
      src: [""]
    })
  },
  I: {
    // color: 'pink',
    sound: new Howl({
      src: [""]
    })
  },
  O: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  P: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Leszek/pk1_echo.mp3"]
    })
  },
  A: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  S: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  D: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  F: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  G: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  H: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  J: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  K: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  L: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  Z: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  X: {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/perc4.mp3"]
    })
  },
  C: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  V: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  B: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  N: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  M: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },

  //////////////////////////////////////////////////////////////////
  // Numbers
  "1": {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/bass2.mp3"]
    })
  },
  "2": {
    // color: 'red',
    sound: new Howl({
      src: ["audio/Guitar/bass3.mp3"]
    })
  },
  "3": {
    // color: 'cyan',
    sound: new Howl({
      src: ["audio/Guitar/bass4.mp3"]
    })
  },
  "4": {
    // color: 'blue',
    sound: new Howl({
      src: ["audio/Guitar/bass5.mp3"]
    })
  },
  "5": {
    // color: 'limegreen',
    sound: new Howl({
      src: ["audio/Guitar/bass6.mp3"]
    })
  },
  "6": {
    // color: 'limegreen',
    sound: new Howl({
      src: ["audio/Guitar/bass7.mp3"]
    })
  },
  "7": {
    // color: 'limegreen',
    sound: new Howl({
      src: ["audio/Guitar/bass8.mp3"]
    })
  },
  "8": {
    // color: 'limegreen',
    sound: new Howl({
      src: ["audio/Guitar/bass9.mp3"]
    })
  },
  "9": {
    // color: 'limegreen',
    sound: new Howl({
      src: ["audio/Guitar/bass10.mp3"]
    })
  },
  "0": {
    // color: 'limegreen',
    sound: new Howl({
      src: ["audio/Guitar/bass11.mp3"]
    })
  },

  //////////////////////////////////////////////////////////////////
  // Special letters
  ą: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  ę: {
    // color: 'red',
    sound: new Howl({
      src: [""]
    })
  },
  ó: {
    // color: 'cyan',
    sound: new Howl({
      src: [""]
    })
  },
  ś: {
    // color: 'blue',
    sound: new Howl({
      src: [""]
    })
  },
  ł: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  ż: {
    // color: 'red',
    sound: new Howl({
      src: [""]
    })
  },
  ź: {
    // color: 'cyan',
    sound: new Howl({
      src: [""]
    })
  },
  ć: {
    // color: 'blue',
    sound: new Howl({
      src: [""]
    })
  },
  ń: {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },

  //////////////////////////////////////////////////////////////////
  // Symbols
  "!": {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  "@": {
    // color: 'red',
    sound: new Howl({
      src: [""]
    })
  },
  "#": {
    // color: 'cyan',
    sound: new Howl({
      src: [""]
    })
  },
  $: {
    // color: 'blue',
    sound: new Howl({
      src: [""]
    })
  },
  "%": {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  "^": {
    // color: 'red',
    sound: new Howl({
      src: [""]
    })
  },
  "&": {
    // color: 'cyan',
    sound: new Howl({
      src: [""]
    })
  },
  "*": {
    // color: 'blue',
    sound: new Howl({
      src: [""]
    })
  },
  "(": {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  ")": {
    // color: 'red',
    sound: new Howl({
      src: [""]
    })
  },
  "-": {
    // color: 'cyan',
    sound: new Howl({
      src: ["audio/Guitar/bass12.mp3"]
    })
  },
  _: {
    // color: 'blue',
    sound: new Howl({
      src: [""]
    })
  },
  "+": {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  "=": {
    // color: 'red',
    sound: new Howl({
      src: ["audio/Guitar/bass13.mp3"]
    })
  },
  "[": {
    // color: 'cyan',
    sound: new Howl({
      src: ["audio/Guitar/disson1.mp3"]
    })
  },
  "]": {
    // color: 'blue',
    sound: new Howl({
      src: ["audio/Guitar/disson2.mp3"]
    })
  },
  "{": {
    // color: 'white',
    sound: new Howl({
      src: [""]
    })
  },
  "}": {
    // color: 'red',
    sound: new Howl({
      src: [""]
    })
  },
  ":": {
    // color: 'cyan',
    sound: new Howl({
      src: [""]
    })
  },
  ";": {
    // color: 'blue',
    sound: new Howl({
      src: ["audio/Guitar/penta10.mp3"]
    })
  },
  "'": {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/penta11.mp3"]
    })
  },
  '"': {
    // color: 'red',
    sound: new Howl({
      src: [""]
    })
  },
  "\\": {
    // color: 'cyan',
    sound: new Howl({
      src: ["audio/Guitar/penta12.mp3"]
    })
  },
  "|": {
    // color: 'blue',
    sound: new Howl({
      src: [""]
    })
  },
  ",": {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/misc6.mp3"]
    })
  },
  "<": {
    // color: 'red',
    sound: new Howl({
      src: [""]
    })
  },
  ".": {
    // color: 'cyan',
    sound: new Howl({
      src: ["audio/Guitar/misc11.mp3"]
    })
  },
  ">": {
    // color: 'blue',
    sound: new Howl({
      src: [""]
    })
  },
  "/": {
    // color: 'white',
    sound: new Howl({
      src: ["audio/Guitar/harmonics1.mp3"]
    })
  },
  "?": {
    // color: 'red',
    sound: new Howl({
      src: [""]
    })
  },
  "#": {
    // color: 'cyan',
    sound: new Howl({
      src: [""]
    })
  },
  "`": {
    // color: 'blue',
    sound: new Howl({
      src: ["audio/Guitar/bass1.mp3"]
    })
  },

  //////////////////////////////////////////////////////////////////
  // Whitespace
  " ": {
    // color: 'blue',
    sound: new Howl({
      src: ["audio/Guitar/thump1.mp3"]
    })
  }
};

///////////////////////////////////////////////////////////////////////

// var MOVESPEED = 10;

Howler.volume(1);

var objects = [];

function onKeyDown(event) {
  //console.log("onKeyDown | code " + event.character);
  if (soundMap[event.character].sound._src[0].length > 0) {
    // console.log("'" + event.character + "' : '" + soundMap[event.character].sound._src + "'");

    // Testing stereo panning
    var randomStereoPan = Math.random() - 0.5;
    // console.log("new random stereo pan: " + randomStereoPan);
    soundMap[event.character].sound.stereo(randomStereoPan);
    soundMap[event.character].sound.play();

    var maxPoint = new Point(view.size._width, view.size._height);
    // var randomPoint = Point.random();
    var startPoint = maxPoint * Point.random();
    var endPoint = maxPoint * Point.random();
    // Set radius accordingly to window size
    var maxRadius =
      window.innerWidth > window.innerHeight
        ? window.innerHeight
        : window.innerWidth;
    var radius = Math.random() * maxRadius * 0.5 + 10;

    var newCircle = new Path.Circle(startPoint, radius);
    newCircle.endPoint = endPoint;
    var randomMoveSpeed = Math.random() * 5;
    newCircle.moveSpeed = randomMoveSpeed;
    var randomHueChangeSpeed = Math.random() * 3;
    newCircle.hueChangeSpeed = randomHueChangeSpeed;
    // <!-- give newCircle a predefined color -->
    // newCircle.fillColor = soundMap[event.key].color;
    // <!-- give newCircle a random color -->
    newCircle.fillColor = randomRgbColor();
    // <!-- add object to objects array -->
    objects.push(newCircle);
    // console.log(objects);
  }
}

function onFrame(event) {
  for (var i = 0; i < objects.length; i++) {
    // Change hue
    objects[i].fillColor.hue += objects[i].hueChangeSpeed;
    // Scale
    objects[i].scale(0.96);
    // // Move towards end point
    // var nextPoint = new Point(
    //   objects[i]._position.x +
    //     (objects[i].endPoint.x - objects[i]._position.x) * objects[i].moveSpeed,
    //   objects[i]._position.y +
    //     (objects[i].endPoint.y - objects[i]._position.y) * objects[i].moveSpeed
    // );
    var nextPoint =
      objects[i]._position +
      (objects[i].endPoint - objects[i]._position) * objects[i].moveSpeed;

    objects[i]._position = nextPoint;

    if (objects[i].area < 1) {
      objects[i].remove();
      objects.splice(i, 1);
      i--;
      // console.log(objects);
    }
  }
}

function randomRgbColor() {
  var r = Math.random() * 255;
  var g = Math.random() * 255;
  var b = Math.random() * 255;
  var colorString = "rgb(" + r + ", " + g + ", " + b + ")";
  return colorString;
}
